Search.setIndex({"docnames": ["cardinality_limiter", "failover_redis", "index", "sliding_windows_rate_limiter"], "filenames": ["cardinality_limiter.rst", "failover_redis.rst", "index.rst", "sliding_windows_rate_limiter.rst"], "titles": ["Cardinality Limiter", "FailoverRedis", "sentry-redis-tools", "Sliding Windows Rate Rimiter"], "terms": {"class": [0, 1, 3], "sentry_redis_tool": [0, 1, 3], "cardinality_limit": 0, "rediscardinalitylimit": [0, 2], "client": [0, 1, 3], "num_shard": 0, "3": [0, 1, 3], "num_physical_shard": 0, "metric_tag": 0, "none": [0, 3], "metrics_backend": 0, "The": [0, 1, 3], "redi": [0, 1, 3], "store": [0, 3], "kei": [0, 3], "per": [0, 3], "unit": [0, 3], "hash": 0, "add": 0, "set": [0, 3], "prefix": [0, 3], "requestedquota": [0, 2, 3], "memori": 0, "usag": [0, 3], "grow": 0, "dimension": 0, "configur": [0, 3], "quota": [0, 2, 3], "i": [0, 1, 3], "e": 0, "maximum": 0, "grantedquota": [0, 2, 3], "granted_unit_hash": 0, "mani": [0, 3], "design": 0, "decis": 0, "thi": [0, 1, 3], "were": 0, "copi": 0, "from": [0, 1, 3], "sliding_window": 0, "rate": [0, 2], "you": [0, 1, 3], "find": 0, "next": 0, "coupl": [0, 3], "paragraph": 0, "its": [0, 1], "document": 0, "well": 0, "why": 0, "check": [0, 3], "us": [0, 1, 3], "two": [0, 3], "separ": [0, 3], "implement": [0, 1], "isn": 0, "t": [0, 3], "time": [0, 3], "bug": 0, "allow": [0, 3], "me": 0, "over": [0, 1, 3], "spend": [0, 3], "when": [0, 1, 3], "request": [0, 1, 3], "ar": [0, 1, 3], "happen": [0, 3], "concurr": 0, "It": [0, 3], "": [0, 3], "desir": 0, "first": [0, 1], "do": [0, 1, 3], "potenti": 0, "fallibl": 0, "oper": 0, "consum": [0, 1, 3], "primarili": 0, "go": [0, 3], "insid": 0, "metric": [0, 3], "string": [0, 1, 3], "index": [0, 3], "databas": 0, "write": [0, 1, 3], "what": 0, "we": [0, 3], "want": [0, 3], "read": 0, "db": [0, 3], "If": [0, 1, 3], "did": 0, "ani": [0, 1], "other": 0, "wai": 0, "obviou": 0, "one": [0, 3], "being": 0, "crash": 0, "while": [0, 1], "can": [0, 3], "big": 0, "problem": 0, "those": 0, "fluke": 0, "especi": 0, "result": 0, "an": 0, "overload": 0, "howev": 0, "case": [0, 3], "loop": 0, "quickli": 0, "100": [0, 3], "g": 0, "due": 0, "schema": 0, "mismatch": 0, "between": 0, "code": 0, "somehow": 0, "don": [0, 3], "surfac": 0, "dure": 0, "In": [0, 1], "would": [0, 3], "immedi": 0, "incid": 0, "recoveri": 0, "requir": 0, "u": 0, "reset": [0, 3], "all": [0, 1], "manual": 0, "disabl": 0, "via": [0, 3], "some": 0, "killswitch": 0, "backend": [0, 3], "realli": 0, "onli": [0, 1], "care": [0, 3], "about": 0, "alreadi": 0, "ha": [0, 1, 3], "consist": [0, 3], "provid": 0, "strong": 0, "abil": 0, "increment": 0, "counter": 0, "involv": 0, "hit": 0, "same": [0, 1, 3], "node": [0, 1], "That": [0, 3], "mean": 0, "org_id": [0, 3], "123": [0, 3], "run": 0, "singl": [0, 1], "also": 0, "global": 0, "have": 0, "unchang": 0, "strongli": [0, 3], "scalabl": 0, "There": 0, "make": [0, 3], "org": [0, 3], "so": [0, 3], "right": 0, "now": 0, "contain": 0, "multipl": [0, 1, 3], "differ": 0, "cannot": 0, "atom": 0, "even": 0, "chang": [0, 3], "interfac": 0, "easili": 0, "fixabl": 0, "becaus": [0, 3], "abov": 0, "current": [0, 3], "control": 0, "shard": 0, "within": [0, 3], "window": [0, 2], "help": 0, "further": 0, "distribut": 0, "load": 0, "intern": [0, 1], "sinc": 0, "given": [0, 3], "up": [0, 1, 3], "gener": 0, "anywai": 0, "reason": 0, "explicitli": 0, "failover_redi": 1, "arg": 1, "_retri": 1, "10": [1, 3], "_backoff_min": 1, "0": [1, 3], "2": [1, 3], "_backoff_max": 1, "5": 1, "_backoff_multipli": 1, "kwarg": 1, "host": 1, "retri": 1, "logic": 1, "intend": 1, "surviv": 1, "failov": 1, "event": 1, "cap": 1, "exponenti": 1, "backoff": 1, "jitter": 1, "http": 1, "io": 1, "command": 1, "sequenc": [1, 3], "1": [1, 3], "primari": 1, "start": [1, 3], "paus": 1, "which": [1, 3], "incom": 1, "prevent": 1, "accumul": 1, "new": 1, "data": 1, "replic": 1, "stream": 1, "point": 1, "instanc": 1, "fail": 1, "readonlyerror": 1, "monitor": 1, "replica": 1, "wait": 1, "indic": 1, "fulli": 1, "catch": 1, "demot": 1, "itself": 1, "done": [1, 3], "dual": 1, "master": 1, "scenario": 1, "4": 1, "previou": 1, "send": 1, "special": 1, "psync": 1, "target": 1, "instruct": 1, "becom": 1, "onc": [1, 3], "receiv": 1, "acknowledg": 1, "wa": 1, "accept": 1, "unpaus": 1, "addit": 1, "memorystor": 1, "main": [1, 3], "state": 1, "exist": [1, 3], "connect": 1, "endpoint": [1, 3], "drop": 1, "unavail": 1, "few": 1, "second": [1, 3], "reconnect": 1, "On": [1, 3], "your": 1, "applic": 1, "automat": 1, "redirect": 1, "ip": 1, "address": 1, "need": 1, "updat": 1, "after": [1, 3], "cloud": 1, "googl": 1, "com": 1, "doc": 1, "high": 1, "avail": 1, "how_a_failover_affects_your_appl": 1, "failoverredi": 2, "slide": 2, "rimit": 2, "exampl": 2, "invalidconfigur": [2, 3], "redisslidingwindowratelimit": [2, 3], "cardin": 2, "limit": [2, 3], "ratelimit": 3, "As": 3, "oppos": 3, "api": 3, "minut": 3, "doe": 3, "everi": 3, "instead": 3, "each": 3, "granular": 3, "gradual": 3, "step": 3, "addition": 3, "project": 3, "organ": 3, "scope": 3, "appli": 3, "flipsid": 3, "depend": 3, "veri": 3, "easi": 3, "enforc": 3, "number": 3, "30": 3, "our": 3, "call": 3, "check_and_use_quota": 3, "f": 3, "id": 3, "window_second": 3, "arbitrari": 3, "how": 3, "should": 3, "simpler": 3, "For": 3, "900": 3, "follow": 3, "899": 3, "898": 3, "90": 3, "89": 3, "88": 3, "valu": 3, "assum": 3, "goe": 3, "through": 3, "anoth": 3, "902": 3, "sum": 3, "exceed": 3, "grant": 3, "minimum": 3, "9": 3, "respect": 3, "reject": 3, "sliding_windows_rate_limit": 3, "reached_quota": 3, "except": 3, "granularity_second": 3, "prefix_overrid": 3, "iter_window": 3, "request_timestamp": 3, "iter": 3, "yield": 3, "repres": 3, "absolut": 3, "granul": 3, "function": 3, "calcul": 3, "made": 3, "revers": 3, "order": 3, "newest": 3, "timestamp": 3, "oldest": 3, "process": 3, "ad": 3, "rtype": 3, "int": 3, "self": 3, "instanti": 3, "rang": 3, "resp": 3, "foo": 3, "timestamp_offset": 3, "assert": 3, "see": 3, "check_within_quota": 3, "paramet": 3, "return": 3, "type": 3, "whether": 3, "actual": 3, "use_quota": 3, "protect": 3, "resourc": 3, "been": 3, "tupl": 3, "them": 3, "underli": 3, "danc": 3}, "objects": {"sentry_redis_tools.cardinality_limiter": [[0, 0, 1, "", "RedisCardinalityLimiter"]], "sentry_redis_tools.failover_redis": [[1, 0, 1, "", "FailoverRedis"]], "sentry_redis_tools": [[3, 1, 0, "-", "sliding_windows_rate_limiter"]], "sentry_redis_tools.sliding_windows_rate_limiter": [[3, 0, 1, "", "GrantedQuota"], [3, 2, 1, "", "InvalidConfiguration"], [3, 0, 1, "", "Quota"], [3, 0, 1, "", "RedisSlidingWindowRateLimiter"], [3, 0, 1, "", "RequestedQuota"]], "sentry_redis_tools.sliding_windows_rate_limiter.Quota": [[3, 3, 1, "", "iter_window"], [3, 4, 1, "", "limit"]], "sentry_redis_tools.sliding_windows_rate_limiter.RedisSlidingWindowRateLimiter": [[3, 3, 1, "", "check_and_use_quotas"], [3, 3, 1, "", "check_within_quotas"], [3, 3, 1, "", "use_quotas"]]}, "objtypes": {"0": "py:class", "1": "py:module", "2": "py:exception", "3": "py:method", "4": "py:attribute"}, "objnames": {"0": ["py", "class", "Python class"], "1": ["py", "module", "Python module"], "2": ["py", "exception", "Python exception"], "3": ["py", "method", "Python method"], "4": ["py", "attribute", "Python attribute"]}, "titleterms": {"cardin": 0, "limit": 0, "failoverredi": 1, "sentri": 2, "redi": 2, "tool": 2, "content": 2, "slide": 3, "window": 3, "rate": 3, "rimit": 3, "exampl": 3}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx": 58}, "alltitles": {"Cardinality Limiter": [[0, "cardinality-limiter"]], "FailoverRedis": [[1, "failoverredis"]], "sentry-redis-tools": [[2, "sentry-redis-tools"]], "Contents:": [[2, null]], "Sliding Windows Rate Rimiter": [[3, "module-sentry_redis_tools.sliding_windows_rate_limiter"]], "Example": [[3, "example"]]}, "indexentries": {"rediscardinalitylimiter (class in sentry_redis_tools.cardinality_limiter)": [[0, "sentry_redis_tools.cardinality_limiter.RedisCardinalityLimiter"]], "failoverredis (class in sentry_redis_tools.failover_redis)": [[1, "sentry_redis_tools.failover_redis.FailoverRedis"]], "grantedquota (class in sentry_redis_tools.sliding_windows_rate_limiter)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.GrantedQuota"]], "invalidconfiguration": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.InvalidConfiguration"]], "quota (class in sentry_redis_tools.sliding_windows_rate_limiter)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.Quota"]], "redisslidingwindowratelimiter (class in sentry_redis_tools.sliding_windows_rate_limiter)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.RedisSlidingWindowRateLimiter"]], "requestedquota (class in sentry_redis_tools.sliding_windows_rate_limiter)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.RequestedQuota"]], "check_and_use_quotas() (sentry_redis_tools.sliding_windows_rate_limiter.redisslidingwindowratelimiter method)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.RedisSlidingWindowRateLimiter.check_and_use_quotas"]], "check_within_quotas() (sentry_redis_tools.sliding_windows_rate_limiter.redisslidingwindowratelimiter method)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.RedisSlidingWindowRateLimiter.check_within_quotas"]], "iter_window() (sentry_redis_tools.sliding_windows_rate_limiter.quota method)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.Quota.iter_window"]], "limit (sentry_redis_tools.sliding_windows_rate_limiter.quota attribute)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.Quota.limit"]], "module": [[3, "module-sentry_redis_tools.sliding_windows_rate_limiter"]], "sentry_redis_tools.sliding_windows_rate_limiter": [[3, "module-sentry_redis_tools.sliding_windows_rate_limiter"]], "use_quotas() (sentry_redis_tools.sliding_windows_rate_limiter.redisslidingwindowratelimiter method)": [[3, "sentry_redis_tools.sliding_windows_rate_limiter.RedisSlidingWindowRateLimiter.use_quotas"]]}})